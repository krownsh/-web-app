# è¨˜å¸³é é¢ (MapBudgetScreen) UI è¨­è¨ˆè¦åŠƒ

æœ¬æ–‡ä»¶æè¿°å› æ‡‰ã€Œå…¬ç©é‡‘ vs å€‹äººæ”¯å‡ºã€å€åˆ†éœ€æ±‚ï¼Œå° `MapBudgetScreen` é€²è¡Œçš„ UI èª¿æ•´è¦åŠƒã€‚

## 1. é ‚éƒ¨ç¸½è¦½å¡ç‰‡ (Total Cards)

ç›®å‰è¨­è¨ˆç‚ºã€Œç¸½é ç®—ã€èˆ‡ã€Œç›®å‰èŠ±è²»ã€ã€‚
æ–°è¨­è¨ˆå°‡æ”¹ç‚ºå·¦å³å…©å¼µå¡ç‰‡ï¼Œåˆ†åˆ¥é¡¯ç¤ºã€Œå…¬ç©é‡‘ã€èˆ‡ã€Œå€‹äººã€çš„ç‹€æ³ã€‚

### å·¦å¡ç‰‡ï¼šå…¬ç©é‡‘ (Public Fund)
*   **æ¨™é¡Œ**: å…¬ç©é‡‘ç¸½é¤˜é¡ (æˆ–ç¸½æ”¯å‡º)
*   **é‡‘é¡**: é¡¯ç¤ºæ‰€æœ‰ `payment_type='public'` çš„ç¸½æ”¯å‡ºã€‚
*   **èƒŒæ™¯è‰²**: å»¶çºŒç›®å‰çš„ `zen-moss` (ç¶ è‰²ç³»)ï¼Œä»£è¡¨å…±äº«è³‡æºã€‚
*   **è³‡è¨Š**: `à¸¿ ç¸½æ”¯å‡º`

### å³å¡ç‰‡ï¼šå€‹äººæ”¯å‡º (My Spending)
*   **æ¨™é¡Œ**: å€‹äººç¸½èŠ±è²»
*   **é‡‘é¡**: é¡¯ç¤ºæ‰€æœ‰ `payment_type='self'` ä¸” `owner_id=me` çš„ç¸½æ”¯å‡ºã€‚
*   **èƒŒæ™¯è‰²**: ä½¿ç”¨ `zen-brown` æˆ– `white` (èˆ‡ç¾æœ‰å³å¡è¨­è¨ˆé¡žä¼¼)ï¼Œä»£è¡¨å€‹äººç´€éŒ„ã€‚
*   **è³‡è¨Š**: `à¸¿ ç¸½æ”¯å‡º`

---

## 2. åˆ—è¡¨ç¯©é¸ (Filter Tabs)

ç›®å‰çš„æ—¥æœŸ Tabs (`Pre`, `D1`... `All`) å¾ˆå¥½ç”¨ï¼Œä¿ç•™ã€‚
ä½†éœ€è¦æ–°å¢žä¸€å±¤ã€Œé¡žåž‹ç¯©é¸ã€ï¼Œä½æ–¼æ—¥æœŸ Tabs ä¸Šæ–¹æˆ–ä¸‹æ–¹ã€‚

### å»ºè­°æ–¹æ¡ˆï¼šæ–°å¢žã€Œæª¢è¦–æ¨¡å¼ã€åˆ‡æ›å™¨ (View Mode Toggle)
ä½æ–¼æ—¥æœŸ Tabs çš„ä¸Šæ–¹ï¼ˆSticky Header ä¸‹æ–¹ï¼‰ã€‚

*   **é¸é … A**: [ å…¬æ¬¾æª¢è¦– ] (é è¨­)
    *   åªé¡¯ç¤º `payment_type='public'` çš„é …ç›®ã€‚
    *   è¨ˆç®—ç¸½å’Œæ™‚åªç®—å…¬æ¬¾ã€‚
*   **é¸é … B**: [ å€‹äººæª¢è¦– ]
    *   åªé¡¯ç¤º `payment_type='self'` (æˆ‘çš„) çš„é …ç›®ã€‚
    *   è¨ˆç®—ç¸½å’Œæ™‚åªç®—å€‹äººã€‚
*   (é¸ç”¨) **é¸é … C**: [ å…¨éƒ¨ ]
    *   é¡¯ç¤ºæ‰€æœ‰ï¼Œä½†åˆ—è¡¨é …ç›®ä¸Šè¦æœ‰æ˜Žé¡¯æ¨™ç¤ºå€åˆ†ã€‚

**æŽ¡ç”¨æ–¹æ¡ˆ**: ç°¡åŒ– UIï¼Œåœ¨ã€Œè¿‘æœŸæ¶ˆè²»ã€æ¨™é¡Œæ—æ–°å¢žä¸€å€‹ Toggle æˆ– Segmented Control [å…¨éƒ¨ | å…¬æ¬¾ | å€‹äºº]ã€‚
æˆ–æ˜¯ï¼Œç›´æŽ¥åœ¨åˆ—è¡¨é …ç›®ä¸Šç”¨è¦–è¦ºå€åˆ†ï¼š
*   **å…¬æ¬¾é …ç›®**: å·¦å´ Icon ä½¿ç”¨æ¨™æº–è‰² (icon é¡è‰²ä¸è®Š)ã€‚
*   **å€‹äººé …ç›®**: èƒŒæ™¯è‰²å¾®èª¿ã€‚

**ä½¿ç”¨è€…éœ€æ±‚**: "ç¸½è¦½åŠèŠ±è²»ï¼Œéœ€è¦å€åˆ†è‡ªå·±åŠå…¬ç©é‡‘"ã€‚
**æ±ºå®š**: 
1.  **åˆ†é åˆ‡æ›**: åœ¨æ—¥æœŸé¸æ“‡å™¨ä¸Šæ–¹æ–°å¢ž [ ðŸ‘¥ å…¬ç©é‡‘ | ðŸ‘¤ å€‹äºº ] åˆ‡æ›éˆ•ã€‚
2.  æ­¤åˆ‡æ›æœƒé€£å‹•ï¼š
    *   ä¸‹æ–¹çš„ **åˆ—è¡¨å…§å®¹** (åªé¡¯ç¤ºè©²é¡žåˆ¥)ã€‚
    *   ä¸Šæ–¹çš„ **ç¸½è¦½å¡ç‰‡** (Highlight å°æ‡‰çš„å¡ç‰‡ï¼Œæ·¡åŒ–å¦ä¸€å€‹)ã€‚

---

## 3. æ–°å¢ž/ç·¨è¼¯ Modal (Add/Edit Modal)

æ–°å¢žä¸€å€‹ã€Œä»˜æ¬¾äººã€é¸æ“‡å€å¡Šã€‚

*   **ä½ç½®**: åœ¨é‡‘é¡è¼¸å…¥æ¡†é™„è¿‘ã€‚
*   **UI å…ƒä»¶**: å…©å€‹ Radio Button æˆ– Segmented Controlã€‚
*   **é¸é …**:
    1.  `ðŸ‘¥ å…¬ç©é‡‘ (Public)` - é è¨­?
    2.  `ðŸ‘¤ å€‹äºº (Self)`
*   **é‚è¼¯**:
    *   è‹¥é¸ã€Œå…¬ç©é‡‘ã€ï¼Œ`payment_type = 'public'`ã€‚
    *   è‹¥é¸ã€Œå€‹äººã€ï¼Œ`payment_type = 'self'`ï¼Œä¸¦ä¸” `owner_id` è¨­ç‚ºç•¶å‰ User IDã€‚

## 4. å¿…è²·æ¸…å–® (Must Buy List) - é¦–é  HomeScreen

*   **æ–°å¢žé …ç›®**: æ–°å¢žæ™‚è©¢å•ã€ŒåŠ å…¥æˆ‘çš„æ¸…å–®ã€æˆ–æ˜¯ã€ŒæŽ¨è–¦çµ¦å¤§å®¶ã€ã€‚
*   **é¡¯ç¤º**:
    *   é è¨­é¡¯ç¤ºã€Œå…¬ç”¨æŽ¨è–¦ã€ã€‚
    *   æ–°å¢žä¸€å€‹ Tab æˆ–å€å¡Šé¡¯ç¤ºã€Œæˆ‘çš„ç§äººæ¸…å–®ã€ã€‚

---

## 5. æŠ€è¡“å¯¦ä½œç­†è¨˜

*   **User ID**: åœ¨ `App.tsx` æˆ– `main.tsx` åˆå§‹åŒ–æ™‚ï¼Œæª¢æŸ¥ `localStorage.getItem('zen_user_id')`ã€‚è‹¥ç„¡å‰‡ç”Ÿæˆä¸€å€‹ UUIDv4 ä¸¦å­˜å…¥ã€‚
*   **API è«‹æ±‚**: æ‰€æœ‰çš„ GET è«‹æ±‚æœƒæ‹¿åˆ°å…¨é‡è³‡æ–™ (Google Sheets ç‰¹æ€§)ï¼Œå‰ç«¯éœ€è‡ªè¡Œ `filter`ã€‚
    *   `records.filter(r => r.payment_type === 'public' || r.owner_id === myUserId)`

---

